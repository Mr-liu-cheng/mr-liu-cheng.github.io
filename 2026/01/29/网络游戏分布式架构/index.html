<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>网络游戏分布式架构 | LiuCheng's Blog</title><meta name="author" content="LiuCheng"><meta name="copyright" content="LiuCheng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="简易网络游戏分布式架构图一、核心架构图（概览）123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778┌─────────────────────────────">
<meta property="og:type" content="article">
<meta property="og:title" content="网络游戏分布式架构">
<meta property="og:url" content="https://mr-liu-cheng.github.io/2026/01/29/%E7%BD%91%E7%BB%9C%E6%B8%B8%E6%88%8F%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/">
<meta property="og:site_name" content="LiuCheng&#39;s Blog">
<meta property="og:description" content="简易网络游戏分布式架构图一、核心架构图（概览）123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778┌─────────────────────────────">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mr-liu-cheng.github.io/img/favicon.png">
<meta property="article:published_time" content="2026-01-29T12:06:02.000Z">
<meta property="article:modified_time" content="2026-01-29T12:06:02.000Z">
<meta property="article:author" content="LiuCheng">
<meta property="article:tag" content="分布式">
<meta property="article:tag" content="微服务">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mr-liu-cheng.github.io/img/favicon.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://mr-liu-cheng.github.io/2026/01/29/%E7%BD%91%E7%BB%9C%E6%B8%B8%E6%88%8F%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-1389699351715193',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '网络游戏分布式架构',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (true) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">84</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">48</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa-solid fa-book"></i><span> Doc</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-timeline"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tag</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa-solid fa-folder-tree"></i><span> Categories</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/game/"><i class="fa-fw fa-solid fa-gamepad"></i><span> Game</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa-regular fa-pen-to-square"></i><span> More</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/musicPage/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/%E5%BD%B1%E8%A7%86%E5%88%86%E4%BA%AB/"><i class="fa-fw fa-solid fa-film"></i><span> Vidio Sharing</span></a></li><li><a class="site-page child" href="/%E7%BE%8E%E9%A3%9F/"><i class="fa-fw fa-solid fa-mug-hot"></i><span> Delicious</span></a></li><li><a class="site-page child" href="/%E6%B8%B8%E8%AE%B0/"><i class="fa-fw fa-solid fa-person-hiking"></i><span> Tourist</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Calendar/"><i class="fa-fw fa-regular fa-calendar-check"></i><span> Calendar</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/favicon.png" alt="Logo"><span class="site-name">LiuCheng's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">网络游戏分布式架构</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa-solid fa-book"></i><span> Doc</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-timeline"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tag</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa-solid fa-folder-tree"></i><span> Categories</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/game/"><i class="fa-fw fa-solid fa-gamepad"></i><span> Game</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fa-regular fa-pen-to-square"></i><span> More</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/musicPage/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/%E5%BD%B1%E8%A7%86%E5%88%86%E4%BA%AB/"><i class="fa-fw fa-solid fa-film"></i><span> Vidio Sharing</span></a></li><li><a class="site-page child" href="/%E7%BE%8E%E9%A3%9F/"><i class="fa-fw fa-solid fa-mug-hot"></i><span> Delicious</span></a></li><li><a class="site-page child" href="/%E6%B8%B8%E8%AE%B0/"><i class="fa-fw fa-solid fa-person-hiking"></i><span> Tourist</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Calendar/"><i class="fa-fw fa-regular fa-calendar-check"></i><span> Calendar</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">网络游戏分布式架构</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-01-29T12:06:02.000Z" title="发表于 2026-01-29 12:06:02">2026-01-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-01-29T12:06:02.000Z" title="更新于 2026-01-29 12:06:02">2026-01-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">网络编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><h1 id="简易网络游戏分布式架构图"><a href="#简易网络游戏分布式架构图" class="headerlink" title="简易网络游戏分布式架构图"></a>简易网络游戏分布式架构图</h1><h2 id="一、核心架构图（概览）"><a href="#一、核心架构图（概览）" class="headerlink" title="一、核心架构图（概览）"></a>一、核心架构图（概览）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                            客户端层 (Client Layer)                           │</span><br><span class="line">├─────────────────────────────────────────────────────────────────────────────┤</span><br><span class="line">│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │</span><br><span class="line">│  │  手游   │  │  端游   │  │  页游   │  │ Web管理 │  │   SDK   │           │</span><br><span class="line">│  │ App     │  │ Client  │  │ Browser │  │ Console │  │         │           │</span><br><span class="line">│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘           │</span><br><span class="line">│       │             │             │            │            │                │</span><br><span class="line">└───────┼─────────────┼─────────────┼────────────┼────────────┼────────────────┘</span><br><span class="line">        │             │             │            │            │</span><br><span class="line">        ▼             ▼             ▼            ▼            ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                         网关接入层 (Gateway Layer)                           │</span><br><span class="line">│  ┌──────────────────────────────────────────────────────────┐              │</span><br><span class="line">│  │                    负载均衡集群 (Load Balancer)            │              │</span><br><span class="line">│  │  ┌─────────────┬──────────────┬────────────┬──────────┐  │              │</span><br><span class="line">│  │  │   Nginx     │    HAProxy   │    LVS     │   F5     │  │              │</span><br><span class="line">│  │  └─────────────┴──────────────┴────────────┴──────────┘  │              │</span><br><span class="line">│  └──────────────────────────┬────────────────────────────────┘              │</span><br><span class="line">│                             │                                                 │</span><br><span class="line">│       ┌─────────────────────┼─────────────────────┐                         │</span><br><span class="line">│       ▼                     ▼                     ▼                         │</span><br><span class="line">│  ┌──────────┐         ┌──────────┐         ┌──────────┐                    │</span><br><span class="line">│  │ TCP网关   │         │ HTTP网关  │         │ WebSocket │                    │</span><br><span class="line">│  │ (Game)    │         │ (RestAPI)│         │ (实时)    │                    │</span><br><span class="line">│  └────┬──────┘         └────┬─────┘         └────┬─────┘                    │</span><br><span class="line">│       │                     │                    │                          │</span><br><span class="line">└───────┼─────────────────────┼────────────────────┼──────────────────────────┘</span><br><span class="line">        │                     │                    │</span><br><span class="line">        ▼                     ▼                    ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                        业务服务层 (Business Layer)                           │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐             │</span><br><span class="line">│  │  登录服务   │  │  角色服务   │  │  背包服务   │  │  好友服务   │             │</span><br><span class="line">│  │  Login     │  │  Character │  │  Bag       │  │  Friend    │             │</span><br><span class="line">│  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘             │</span><br><span class="line">│        │                │                │               │                   │</span><br><span class="line">│  ┌─────┴──────┐  ┌─────┴──────┐  ┌─────┴──────┐  ┌─────┴──────┐             │</span><br><span class="line">│  │  匹配服务   │  │  战斗服务   │  │  副本服务   │  │  邮件服务   │             │</span><br><span class="line">│  │  Match     │  │  Battle    │  │  Dungeon   │  │  Mail      │             │</span><br><span class="line">│  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘             │</span><br><span class="line">│        │                │                │               │                   │</span><br><span class="line">│  ┌─────┴──────┐  ┌─────┴──────┐  ┌─────┴──────┐  ┌─────┴──────┐             │</span><br><span class="line">│  │  公会服务   │  │  拍卖行服务  │  │  聊天服务   │  │  排行服务   │             │</span><br><span class="line">│  │  Guild     │  │  Auction   │  │  Chat      │  │  Rank      │             │</span><br><span class="line">│  └────────────┘  └────────────┘  └────────────┘  └────────────┘             │</span><br><span class="line">│                                                                              │</span><br><span class="line">└──────────────────────┬───────────────────────────────────────────────────────┘</span><br><span class="line">                       │</span><br><span class="line">                       ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                        数据服务层 (Data Layer)                               │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                    缓存层 (Cache Layer)                               │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │  Redis   │  │ Memcached│  │  Local   │  │  CDN     │            │    │</span><br><span class="line">│  │  │  集群     │  │  集群     │  │  Cache   │  │  缓存     │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                    存储层 (Storage Layer)                             │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │  MySQL   │  │ MongoDB  │  │ PostgreSQL│ │  TiDB    │            │    │</span><br><span class="line">│  │  │  集群     │  │  集群     │  │  集群      │ │  集群     │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                    大数据层 (BigData Layer)                           │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │   HDFS   │  │  HBase   │  │ ClickHouse│ │  ELK     │            │    │</span><br><span class="line">│  │  │          │  │          │  │           │ │   Stack  │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">└─────────────────────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="二、详细架构图（组件交互）"><a href="#二、详细架构图（组件交互）" class="headerlink" title="二、详细架构图（组件交互）"></a>二、详细架构图（组件交互）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                             客户端                                            │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                          游戏客户端                                    │    │</span><br><span class="line">│  │                                                                      │    │</span><br><span class="line">│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐    │    │</span><br><span class="line">│  │  │   UI    │  │  网络    │  │  渲染    │  │  音频    │  │  逻辑    │    │    │</span><br><span class="line">│  │  │   Layer │  │  Module │  │  Engine │  │  Engine │  │  Engine │    │    │</span><br><span class="line">│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘    │    │</span><br><span class="line">│  │                                                                      │    │</span><br><span class="line">│  │  ┌─────────────────────────────────────────────────────────────┐    │    │</span><br><span class="line">│  │  │                       SDK层                                  │    │    │</span><br><span class="line">│  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │    │    │</span><br><span class="line">│  │  │  │ 登录SDK │  │ 支付SDK │  │ 分享SDK │  │ 统计SDK │        │    │    │</span><br><span class="line">│  │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │    │    │</span><br><span class="line">│  │  └─────────────────────────────────────────────────────────────┘    │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">└──────────────────────────────┬───────────────────────────────────────────────┘</span><br><span class="line">                               │</span><br><span class="line">                               ▼ (TCP/HTTP/WebSocket)</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                            网关接入层                                          │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                        网关服务器集群                                   │    │</span><br><span class="line">│  │                                                                      │    │</span><br><span class="line">│  │  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐      │    │</span><br><span class="line">│  │  │ 网关节点1 │    │ 网关节点2 │    │ 网关节点3 │    │ 网关节点N │      │    │</span><br><span class="line">│  │  │ (上海)   │    │ (北京)   │    │ (广州)   │    │  ...    │      │    │</span><br><span class="line">│  │  └──────────┘    └──────────┘    └──────────┘    └──────────┘      │    │</span><br><span class="line">│  │       │               │               │               │              │    │</span><br><span class="line">│  │       └───────────────┼───────────────┼───────────────┘              │    │</span><br><span class="line">│  │                       │               │                              │    │</span><br><span class="line">│  │                 ┌─────▼─────┬─────────▼─────┐                      │    │</span><br><span class="line">│  │                 │  会话管理   │   协议转换    │                      │    │</span><br><span class="line">│  │                 │ Session   │  Protocol   │                      │    │</span><br><span class="line">│  │                 │  Manager  │  Converter  │                      │    │</span><br><span class="line">│  │                 └─────┬─────┴─────┬───────┘                      │    │</span><br><span class="line">│  │                       │           │                              │    │</span><br><span class="line">│  └───────────────────────┼───────────┼──────────────────────────────┘    │</span><br><span class="line">│                          │           │                                    │</span><br><span class="line">└──────────────────────────┼───────────┼────────────────────────────────────┘</span><br><span class="line">                           │           │</span><br><span class="line">                           ▼           ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                       微服务治理层 (Service Mesh)                            │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                   服务注册与发现中心                                   │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │  Consul  │  │  Etcd    │  │  ZooKeeper │ │  Nacos   │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                   配置管理中心 (Config Center)                         │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │ Apollo   │  │  Spring  │  │  Etcd    │  │   ...    │            │    │</span><br><span class="line">│  │  │          │  │  Cloud   │  │          │  │          │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                       API网关集群                                     │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │  Kong    │  │  Zuul    │  │  Traefik │  │  Nginx   │            │    │</span><br><span class="line">│  │  │ Gateway  │  │ Gateway  │  │  Gateway │  │  Plus    │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">└──────────────────────────────────┬───────────────────────────────────────────┘</span><br><span class="line">                                   │</span><br><span class="line">                                   ▼ (RPC/HTTP/gRPC)</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                             业务微服务层                                      │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌────────────────────┬────────────────────┬────────────────────┐          │</span><br><span class="line">│   │  玩家服务域         │   游戏玩法域        │    社交系统域        │          │</span><br><span class="line">│   │  (Player Domain)   │  (Gameplay Domain) │  (Social Domain)  │          │</span><br><span class="line">│   ├────────────────────┼────────────────────┼────────────────────┤          │</span><br><span class="line">│   │ ┌──────────────┐  │ ┌──────────────┐  │ ┌──────────────┐   │          │</span><br><span class="line">│   │ │ 1. 登录服务   │  │ │ 1. 匹配服务    │  │ │ 1. 好友服务   │   │          │</span><br><span class="line">│   │ │   Login      │  │ │   Match      │  │ │   Friend     │   │          │</span><br><span class="line">│   │ └──────────────┘  │ └──────────────┘  │ └──────────────┘   │          │</span><br><span class="line">│   │ ┌──────────────┐  │ ┌──────────────┐  │ ┌──────────────┐   │          │</span><br><span class="line">│   │ │ 2. 角色服务   │  │ │ 2. 战斗服务    │  │ │ 2. 公会服务   │   │          │</span><br><span class="line">│   │ │   Character  │  │ │   Battle     │  │ │   Guild      │   │          │</span><br><span class="line">│   │ └──────────────┘  │ └──────────────┘  │ └──────────────┘   │          │</span><br><span class="line">│   │ ┌──────────────┐  │ ┌──────────────┐  │ ┌──────────────┐   │          │</span><br><span class="line">│   │ │ 3. 背包服务   │  │ │ 3. 副本服务    │  │ │ 3. 聊天服务   │   │          │</span><br><span class="line">│   │ │   Bag        │  │ │   Dungeon    │  │ │   Chat       │   │          │</span><br><span class="line">│   │ └──────────────┘  │ └──────────────┘  │ └──────────────┘   │          │</span><br><span class="line">│   │ ┌──────────────┐  │ ┌──────────────┐  │ ┌──────────────┐   │          │</span><br><span class="line">│   │ │ 4. 任务服务   │  │ │ 4. PVE服务    │  │ │ 4. 邮件服务   │   │          │</span><br><span class="line">│   │ │   Quest      │  │ │   PVE        │  │ │   Mail       │   │          │</span><br><span class="line">│   │ └──────────────┘  │ └──────────────┘  │ └──────────────┘   │          │</span><br><span class="line">│   │ ┌──────────────┐  │ ┌──────────────┐  │ ┌──────────────┐   │          │</span><br><span class="line">│   │ │ 5. 成就服务   │  │ │ 5. PVP服务    │  │ │ 5. 排行榜服务  │   │          │</span><br><span class="line">│   │ │   Achievement│  │ │   PVP        │  │ │   Rank       │   │          │</span><br><span class="line">│   │ └──────────────┘  │ └──────────────┘  │ └──────────────┘   │          │</span><br><span class="line">│   └────────────────────┴────────────────────┴────────────────────┘          │</span><br><span class="line">│                                                                              │</span><br><span class="line">└──────────────────────┬───────────────────────────────────────────────────────┘</span><br><span class="line">                       │</span><br><span class="line">                       ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                           消息队列层                                         │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                    消息中间件集群                                      │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │  Kafka   │  │ RabbitMQ │  │  RocketMQ│ │  Pulsar   │            │    │</span><br><span class="line">│  │  │  集群     │  │  集群     │  │  集群      │ │  集群     │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌─────────────────────────────────────────────────────────────────────┐    │</span><br><span class="line">│  │                      事件处理服务                                      │    │</span><br><span class="line">│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │    │</span><br><span class="line">│  │  │ 登录事件  │  │ 支付事件  │  │ 战斗事件  │  │ 社交事件  │            │    │</span><br><span class="line">│  │  │  Handler │  │  Handler │  │  Handler │  │  Handler │            │    │</span><br><span class="line">│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘            │    │</span><br><span class="line">│  └─────────────────────────────────────────────────────────────────────┘    │</span><br><span class="line">└──────────────────────┬───────────────────────────────────────────────────────┘</span><br><span class="line">                       │</span><br><span class="line">                       ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                             数据存储层                                       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌─────────────────────────────────────────────────────────────────┐       │</span><br><span class="line">│   │                         缓存层 (Cache)                              │       │</span><br><span class="line">│   │   ┌──────────┬──────────┬──────────┬──────────┬──────────┐    │       │</span><br><span class="line">│   │   │  Redis   │  Redis   │ Memcached│  本地     │   CDN    │    │       │</span><br><span class="line">│   │   │  (会话)  │  (热点)   │  (对象)   │  缓存     │  缓存     │    │       │</span><br><span class="line">│   │   │  Cluster │  Cluster │  Cluster │          │          │    │       │</span><br><span class="line">│   │   └──────────┴──────────┴──────────┴──────────┴──────────┘    │       │</span><br><span class="line">│   └─────────────────────────────────────────────────────────────────┘       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌─────────────────────────────────────────────────────────────────┐       │</span><br><span class="line">│   │                       数据库层 (Database)                          │       │</span><br><span class="line">│   │   ┌──────────┬──────────┬──────────┬──────────┬──────────┐    │       │</span><br><span class="line">│   │   │  MySQL   │ PostgreSQL│ MongoDB │  TiDB    │  HBase   │    │       │</span><br><span class="line">│   │   │  (用户)   │  (日志)   │  (配置)  │  (交易)   │  (统计)  │    │       │</span><br><span class="line">│   │   │  Cluster │  Cluster  │  Cluster │  Cluster │  Cluster │    │       │</span><br><span class="line">│   │   └──────────┴──────────┴──────────┴──────────┴──────────┘    │       │</span><br><span class="line">│   └─────────────────────────────────────────────────────────────────┘       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌─────────────────────────────────────────────────────────────────┐       │</span><br><span class="line">│   │                      文件存储层 (File Storage)                    │       │</span><br><span class="line">│   │   ┌──────────┬──────────┬──────────┬──────────┬──────────┐    │       │</span><br><span class="line">│   │   │ 对象存储   │  块存储   │  文件存储  │  CDN     │  备份    │    │       │</span><br><span class="line">│   │   │  AWS S3  │  Ceph    │  NFS     │  节点     │  系统    │    │       │</span><br><span class="line">│   │   │  OSS     │          │          │          │          │    │       │</span><br><span class="line">│   │   └──────────┴──────────┴──────────┴──────────┴──────────┘    │       │</span><br><span class="line">│   └─────────────────────────────────────────────────────────────────┘       │</span><br><span class="line">└──────────────────────┬───────────────────────────────────────────────────────┘</span><br><span class="line">                       │</span><br><span class="line">                       ▼</span><br><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                            运维支撑层                                        │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌─────────────────────────────────────────────────────────────────┐       │</span><br><span class="line">│   │                        容器编排平台                                  │       │</span><br><span class="line">│   │   ┌──────────┬──────────┬──────────┬──────────┬──────────┐    │       │</span><br><span class="line">│   │   │ Kubernetes│ Docker   │ 容器仓库  │  网络     │  存储     │    │       │</span><br><span class="line">│   │   │  Cluster │  Swarm   │  Registry│  Plugin  │  Plugin │    │       │</span><br><span class="line">│   │   └──────────┴──────────┴──────────┴──────────┴──────────┘    │       │</span><br><span class="line">│   └─────────────────────────────────────────────────────────────────┘       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌─────────────────────────────────────────────────────────────────┐       │</span><br><span class="line">│   │                       监控告警平台                                  │       │</span><br><span class="line">│   │   ┌──────────┬──────────┬──────────┬──────────┬──────────┐    │       │</span><br><span class="line">│   │   │ 指标监控  │  日志监控  │  链路追踪  │  告警中心  │  仪表盘  │    │       │</span><br><span class="line">│   │   │ Prometheus│  ELK     │  Jaeger  │  Alert   │  Grafana│    │       │</span><br><span class="line">│   │   │          │   Stack   │          │  Manager │         │    │       │</span><br><span class="line">│   │   └──────────┴──────────┴──────────┴──────────┴──────────┘    │       │</span><br><span class="line">│   └─────────────────────────────────────────────────────────────────┘       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   ┌─────────────────────────────────────────────────────────────────┐       │</span><br><span class="line">│   │                       持续集成/部署                                 │       │</span><br><span class="line">│   │   ┌──────────┬──────────┬──────────┬──────────┬──────────┐    │       │</span><br><span class="line">│   │   │  Git     │ Jenkins  │  GitLab  │  镜像     │  部署     │    │       │</span><br><span class="line">│   │   │          │          │   CI/CD  │  构建     │  工具     │    │       │</span><br><span class="line">│   │   └──────────┴──────────┴──────────┴──────────┴──────────┘    │       │</span><br><span class="line">│   └─────────────────────────────────────────────────────────────────┘       │</span><br><span class="line">│                                                                              │</span><br><span class="line">└─────────────────────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="三、核心数据流架构图"><a href="#三、核心数据流架构图" class="headerlink" title="三、核心数据流架构图"></a>三、核心数据流架构图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                           游戏数据流架构                                      │</span><br><span class="line">│                                                                              │</span><br><span class="line">│   客户端请求流                         服务端响应流                          │</span><br><span class="line">│   ┌──────────┐                       ┌──────────┐                        │</span><br><span class="line">│   │ 客户端    │ ────────────────&gt;    │  网关层   │                        │</span><br><span class="line">│   │ Client   │    (登录/操作)        │ Gateway  │                        │</span><br><span class="line">│   └──────────┘                       └────┬─────┘                        │</span><br><span class="line">│                                            │                               │</span><br><span class="line">│   消息路由流                         协议转换流                              │</span><br><span class="line">│                                         ┌──▼──┐                           │</span><br><span class="line">│   ┌──────────┐                       │ 路由  │                           │</span><br><span class="line">│   │  API网关 │ &lt;───────────────────  │ Router │                           │</span><br><span class="line">│   │  Gateway │    (服务发现)         └──┬───┘                           │</span><br><span class="line">│   └────┬─────┘                           │                               │</span><br><span class="line">│         │                                │                               │</span><br><span class="line">│   服务调用流                         业务处理流                              │</span><br><span class="line">│         │                                ▼                               │</span><br><span class="line">│   ┌─────▼─────┐                   ┌──────────┐                        │</span><br><span class="line">│   │ 微服务A    │                   │ 微服务B   │                        │</span><br><span class="line">│   │ Service A │ &lt;───────────────&gt; │ Service B │                        │</span><br><span class="line">│   └───────────┘   (RPC调用)       └────┬─────┘                        │</span><br><span class="line">│                                            │                               │</span><br><span class="line">│   数据读写流                         缓存同步流                              │</span><br><span class="line">│                                         ┌──▼──┐                           │</span><br><span class="line">│   ┌──────────┐                       │ 缓存层 │                           │</span><br><span class="line">│   │ 数据库层  │ &lt;───────────────────  │ Cache │                           │</span><br><span class="line">│   │ Database │    (缓存更新)         └──┬───┘                           │</span><br><span class="line">│   └──────────┘                           │                               │</span><br><span class="line">│                                            │                               │</span><br><span class="line">│   异步处理流                         事件通知流                              │</span><br><span class="line">│                                         ┌──▼──┐                           │</span><br><span class="line">│   ┌──────────┐                       │ MQ    │                           │</span><br><span class="line">│   │ 消息队列  │ &lt;───────────────────  │ Queue │                           │</span><br><span class="line">│   │ Message  │    (事件发布)          └───────┘                           │</span><br><span class="line">│   │  Queue   │                                                        │</span><br><span class="line">│   └──────────┘                                                        │</span><br><span class="line">│                                                                              │</span><br><span class="line">└─────────────────────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="四、区域部署架构图"><a href="#四、区域部署架构图" class="headerlink" title="四、区域部署架构图"></a>四、区域部署架构图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                        全球多区域部署架构                                    │</span><br><span class="line">│                                                                              │</span><br><span class="line">│          美国东部(弗吉尼亚)           欧洲(法兰克福)           亚洲(新加坡)       │</span><br><span class="line">│          ┌─────────────────┐     ┌─────────────────┐     ┌─────────────┐ │</span><br><span class="line">│          │   美服集群        │     │   欧服集群       │     │  亚服集群    │ │</span><br><span class="line">│          │                 │     │                 │     │            │ │</span><br><span class="line">│          │  ┌───────────┐  │     │  ┌───────────┐  │     │ ┌─────────┐│ │</span><br><span class="line">│          │  │  网关层    │  │     │  │  网关层    │  │     │ │ 网关层   ││ │</span><br><span class="line">│          │  │ Gateway   │  │     │  │ Gateway   │  │     │ │ Gateway ││ │</span><br><span class="line">│          │  └─────┬─────┘  │     │  └─────┬─────┘  │     │ └────┬────┘│ │</span><br><span class="line">│          │        │        │     │        │        │     │      │     │ │</span><br><span class="line">│          │  ┌─────▼─────┐  │     │  ┌─────▼─────┐  │     │ ┌────▼────┐│ │</span><br><span class="line">│          │  │  业务服务   │  │     │  │  业务服务   │  │     │ │ 业务服务 ││ │</span><br><span class="line">│          │  │ Services  │  │     │  │ Services  │  │     │ │Services││ │</span><br><span class="line">│          │  └─────┬─────┘  │     │  └─────┬─────┘  │     │ └────┬────┘│ │</span><br><span class="line">│          │        │        │     │        │        │     │      │     │ │</span><br><span class="line">│          │  ┌─────▼─────┐  │     │  ┌─────▼─────┐  │     │ ┌────▼────┐│ │</span><br><span class="line">│          │  │  数据存储   │  │     │  │  数据存储   │  │     │ │ 数据存储 ││ │</span><br><span class="line">│          │  │  Storage  │  │     │  │  Storage  │  │     │ │ Storage││ │</span><br><span class="line">│          │  └───────────┘  │     │  └───────────┘  │     │ └─────────┘│ │</span><br><span class="line">│          └────────┬─────────┘     └────────┬─────────┘     └─────┬──────┘ │</span><br><span class="line">│                   │                        │                     │       │</span><br><span class="line">│                   └────────────────────────┼─────────────────────┘       │</span><br><span class="line">│                                            │                             │</span><br><span class="line">│                           ┌────────────────▼─────────────────┐         │</span><br><span class="line">│                           │        全局数据中心                  │         │</span><br><span class="line">│                           │      (Global Data Center)        │         │</span><br><span class="line">│                           │                                  │         │</span><br><span class="line">│                           │    ┌──────────────────────┐    │         │</span><br><span class="line">│                           │    │    用户账号中心          │    │         │</span><br><span class="line">│                           │    │    Global Account     │    │         │</span><br><span class="line">│                           │    │      (MySQL集群)       │    │         │</span><br><span class="line">│                           │    └──────────────────────┘    │         │</span><br><span class="line">│                           │                                  │         │</span><br><span class="line">│                           │    ┌──────────────────────┐    │         │</span><br><span class="line">│                           │    │    跨服战系统           │    │         │</span><br><span class="line">│                           │    │    Cross-Server      │    │         │</span><br><span class="line">│                           │    │       Battle         │    │         │</span><br><span class="line">│                           │    └──────────────────────┘    │         │</span><br><span class="line">│                           │                                  │         │</span><br><span class="line">│                           │    ┌──────────────────────┐    │         │</span><br><span class="line">│                           │    │     大数据分析          │    │         │</span><br><span class="line">│                           │    │    BigData Analytics │    │         │</span><br><span class="line">│                           │    └──────────────────────┘    │         │</span><br><span class="line">│                           └──────────────────────────────────┘         │</span><br><span class="line">│                                                                              │</span><br><span class="line">└─────────────────────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="五、关键组件连接关系图"><a href="#五、关键组件连接关系图" class="headerlink" title="五、关键组件连接关系图"></a>五、关键组件连接关系图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────────────────────────┐</span><br><span class="line">│                    核心组件连接关系                                          │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌──────────┐      ┌──────────┐      ┌──────────┐                       │</span><br><span class="line">│  │  客户端   │──────│  网关     │──────│  登录服务  │                       │</span><br><span class="line">│  │ Client   │      │ Gateway  │      │ Login   │                       │</span><br><span class="line">│  └──────────┘      └──────────┘      └────┬─────┘                       │</span><br><span class="line">│                                            │                               │</span><br><span class="line">│  ┌──────────┐      ┌──────────┐      ┌────▼─────┐                       │</span><br><span class="line">│  │  配置中心  │◄─────│  注册中心  │◄─────│  业务服务  │                       │</span><br><span class="line">│  │ Config   │      │ Registry │      │ Service │                       │</span><br><span class="line">│  └──────────┘      └──────────┘      └────┬─────┘                       │</span><br><span class="line">│                                            │                               │</span><br><span class="line">│  ┌──────────┐      ┌──────────┐      ┌────▼─────┐                       │</span><br><span class="line">│  │  消息队列  │◄─────│  缓存层   │◄─────│  数据库   │                       │</span><br><span class="line">│  │   MQ     │      │  Cache   │      │ Database│                       │</span><br><span class="line">│  └──────────┘      └──────────┘      └──────────┘                       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌──────────┐      ┌──────────┐      ┌──────────┐                       │</span><br><span class="line">│  │  监控系统  │─────►│  日志系统  │─────►│  告警系统  │                       │</span><br><span class="line">│  │ Monitor  │      │   Log    │      │ Alert   │                       │</span><br><span class="line">│  └──────────┘      └──────────┘      └──────────┘                       │</span><br><span class="line">│                                                                              │</span><br><span class="line">│  ┌──────────┐      ┌──────────┐      ┌──────────┐                       │</span><br><span class="line">│  │  CI/CD   │─────►│ 容器平台  │─────►│  部署系统  │                       │</span><br><span class="line">│  │ Pipeline │      │ Container│      │ Deploy  │                       │</span><br><span class="line">│  └──────────┘      └──────────┘      └──────────┘                       │</span><br><span class="line">│                                                                              │</span><br><span class="line">└─────────────────────────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="六、简化版架构（适合小型项目）"><a href="#六、简化版架构（适合小型项目）" class="headerlink" title="六、简化版架构（适合小型项目）"></a>六、简化版架构（适合小型项目）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────┐</span><br><span class="line">│                 客户端                        │</span><br><span class="line">│           ┌─────────────┐                 │</span><br><span class="line">│           │  游戏客户端   │                 │</span><br><span class="line">│           └──────┬──────┘                 │</span><br><span class="line">└──────────────────┼──────────────────────────┘</span><br><span class="line">                   │ (TCP/HTTP)</span><br><span class="line">                   ▼</span><br><span class="line">┌─────────────────────────────────────────────┐</span><br><span class="line">│               网关层 (Gateway)                │</span><br><span class="line">│           ┌─────────────┐                 │</span><br><span class="line">│           │  Nginx/网关  │                 │</span><br><span class="line">│           │   服务器     │                 │</span><br><span class="line">│           └──────┬──────┘                 │</span><br><span class="line">└──────────────────┼──────────────────────────┘</span><br><span class="line">                   │ (RPC/HTTP)</span><br><span class="line">                   ▼</span><br><span class="line">┌─────────────────────────────────────────────┐</span><br><span class="line">│              业务服务层 (Services)            │</span><br><span class="line">│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐   │</span><br><span class="line">│  │ 登录  │  │ 角色  │  │ 战斗  │  │ 背包  │   │</span><br><span class="line">│  │服务   │  │服务   │  │服务   │  │服务   │   │</span><br><span class="line">│  └──┬───┘  └──┬───┘  └──┬───┘  └──┬───┘   │</span><br><span class="line">└─────┼─────────┼─────────┼─────────┼─────────┘</span><br><span class="line">      │         │         │         │</span><br><span class="line">      ▼         ▼         ▼         ▼</span><br><span class="line">┌─────────────────────────────────────────────┐</span><br><span class="line">│              数据存储层 (Storage)             │</span><br><span class="line">│  ┌─────────────────────────────────────┐   │</span><br><span class="line">│  │           Redis集群 (缓存)            │   │</span><br><span class="line">│  └─────────────────────────────────────┘   │</span><br><span class="line">│  ┌─────────────────────────────────────┐   │</span><br><span class="line">│  │         MySQL集群 (主数据)            │   │</span><br><span class="line">│  └─────────────────────────────────────┘   │</span><br><span class="line">└─────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="七、核心组件说明表"><a href="#七、核心组件说明表" class="headerlink" title="七、核心组件说明表"></a>七、核心组件说明表</h2><table>
<thead>
<tr>
<th>层级</th>
<th>组件</th>
<th>作用</th>
<th>常用技术</th>
</tr>
</thead>
<tbody><tr>
<td><strong>客户端层</strong></td>
<td>游戏客户端</td>
<td>用户交互界面</td>
<td>Unity, Unreal, Cocos</td>
</tr>
<tr>
<td></td>
<td>网络模块</td>
<td>网络通信</td>
<td>TCP&#x2F;UDP, WebSocket</td>
</tr>
<tr>
<td><strong>网关层</strong></td>
<td>负载均衡</td>
<td>流量分发</td>
<td>Nginx, HAProxy, LVS</td>
</tr>
<tr>
<td></td>
<td>协议网关</td>
<td>协议转换</td>
<td>Netty, Mina</td>
</tr>
<tr>
<td></td>
<td>会话管理</td>
<td>连接管理</td>
<td>自定义网关</td>
</tr>
<tr>
<td><strong>服务层</strong></td>
<td>微服务</td>
<td>业务逻辑处理</td>
<td>Spring Cloud, gRPC</td>
</tr>
<tr>
<td></td>
<td>服务注册</td>
<td>服务发现</td>
<td>Consul, Nacos, Etcd</td>
</tr>
<tr>
<td></td>
<td>API网关</td>
<td>API统一入口</td>
<td>Kong, Zuul, Spring Gateway</td>
</tr>
<tr>
<td><strong>数据层</strong></td>
<td>缓存</td>
<td>热点数据存储</td>
<td>Redis, Memcached</td>
</tr>
<tr>
<td></td>
<td>数据库</td>
<td>持久化存储</td>
<td>MySQL, PostgreSQL, MongoDB</td>
</tr>
<tr>
<td></td>
<td>消息队列</td>
<td>异步处理</td>
<td>Kafka, RabbitMQ, RocketMQ</td>
</tr>
<tr>
<td><strong>运维层</strong></td>
<td>容器平台</td>
<td>服务部署</td>
<td>Kubernetes, Docker</td>
</tr>
<tr>
<td></td>
<td>监控系统</td>
<td>系统监控</td>
<td>Prometheus, Grafana</td>
</tr>
<tr>
<td></td>
<td>日志系统</td>
<td>日志收集</td>
<td>ELK Stack</td>
</tr>
<tr>
<td></td>
<td>CI&#x2F;CD</td>
<td>持续集成</td>
<td>Jenkins, GitLab CI</td>
</tr>
</tbody></table>
<h2 id="八、架构演进路线"><a href="#八、架构演进路线" class="headerlink" title="八、架构演进路线"></a>八、架构演进路线</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">阶段1: 单体架构 (Monolithic)</span><br><span class="line">    ├── 所有功能在一个进程</span><br><span class="line">    └── 单数据库</span><br><span class="line">    </span><br><span class="line">阶段2: 垂直拆分 (Vertical Split)</span><br><span class="line">    ├── 按功能模块拆分服务</span><br><span class="line">    └── 独立数据库</span><br><span class="line">    </span><br><span class="line">阶段3: 服务化 (Service-Oriented)</span><br><span class="line">    ├── 微服务架构</span><br><span class="line">    ├── 服务发现</span><br><span class="line">    └── 统一网关</span><br><span class="line">    </span><br><span class="line">阶段4: 平台化 (Platform)</span><br><span class="line">    ├── 容器化部署</span><br><span class="line">    ├── 自动化运维</span><br><span class="line">    └── 服务网格</span><br><span class="line">    </span><br><span class="line">阶段5: 云原生 (Cloud-Native)</span><br><span class="line">    ├── Serverless</span><br><span class="line">    ├── 多租户</span><br><span class="line">    └── 全球部署</span><br></pre></td></tr></table></figure>

<p>这个架构图涵盖了从客户端到基础设施的完整网络游戏分布式架构，你可以根据项目规模和需求选择相应的组件进行搭建。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://mr-liu-cheng.github.io">LiuCheng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://mr-liu-cheng.github.io/2026/01/29/%E7%BD%91%E7%BB%9C%E6%B8%B8%E6%88%8F%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/">https://mr-liu-cheng.github.io/2026/01/29/%E7%BD%91%E7%BB%9C%E6%B8%B8%E6%88%8F%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://mr-liu-cheng.github.io" target="_blank">LiuCheng's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a><a class="post-meta__tags" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a></div><div class="post-share"><div class="social-share" data-image="/img/favicon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wxpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wxpay.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/01/28/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" title="Redis分布式锁"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Redis分布式锁</div></div><div class="info-2"><div class="info-item-1">Redis 详解：从入门到精通一、Redis 到底是什么？一句话定义：Redis（Remote Dictionary Server）是一个超高性能的内存数据库，同时支持数据持久化。 通俗比喻：  传统数据库（MySQL） &#x3D; 图书馆（数据在硬盘，找书慢但容量大） Redis &#x3D; 你的办公桌（数据在内存，随手就拿，但桌子大小有限）   二、Redis 的核心特点1. 内存存储 - 极速读写123# 对比测试：Redis vs MySQLMySQL读取: 5-10毫秒  # 需要磁盘I/ORedis读取: 0.1毫秒    # 内存直接访问，快50-100倍！  2. 丰富的数据结构不只是简单的 key-value，还有：  字符串（String） 哈希表（Hash） 列表（List） 集合（Set） 有序集合（Sorted Set） 等等…  3. 持久化可选1内存数据 → 定期保存到磁盘 → 重启后可以恢复  4. 单线程架构12一个线程处理所有请求 → 无锁竞争 → 超高并发性能（实际是多路复用，非多线程）   三、Redis...</div></div></div></a><a class="pagination-related" href="/2026/01/29/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20Docker%20%E9%95%9C%E5%83%8F/" title="深入理解 Docker 镜像"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">深入理解 Docker 镜像</div></div><div class="info-2"><div class="info-item-1">深入理解 Docker 镜像：从概念到本质一、镜像到底是什么？1. 官方定义 vs 通俗理解官方定义：  Docker 镜像是一个只读的模板，包含创建 Docker 容器所需的完整文件系统和配置。  通俗比喻：    概念 类比 说明    Docker 镜像 游戏的安装光盘 包含完整的游戏文件，但不能直接运行   Docker 容器 安装后的游戏 可以运行的游戏程序   Dockerfile 游戏制作说明书 说明如何制作这张光盘   Docker Registry 游戏商店 存放各种游戏光盘的地方   更贴近生活的比喻： 12345678910111. 你买了一个【乐高玩具盒】 → 这就是【镜像】   - 盒子里有：积木块（文件） + 说明书（配置）   - 但不能直接玩，只是材料2. 你按照说明书拼装 → 这就是【运行容器】   - 拼出来的【乐高模型】就是【容器】   - 可以玩，可以展示3. 你拼了多个一样的模型 → 这就是【多个容器实例】   - 每个都是独立的   - 但都来自同一个玩具盒  2....</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/01/22/K8s/" title="K8s"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-22</div><div class="info-item-2">K8s</div></div><div class="info-2"><div class="info-item-1">棋牌捕鱼类游戏工作项目中用到</div></div></div></a><a class="pagination-related" href="/2026/01/22/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="分布式与微服务"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-22</div><div class="info-item-2">分布式与微服务</div></div><div class="info-2"><div class="info-item-1">当你选择微服务架构时，你就是在主动选择一个分布式系统。 因为微服务被拆分后，必然要部署到不同的进程、不同的机器上，它们必须通过网络进行通信和协作。所以，微服务架构是分布式系统的一种具体实现形式和应用场景。</div></div></div></a><a class="pagination-related" href="/2026/01/28/Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" title="Redis分布式锁"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-28</div><div class="info-item-2">Redis分布式锁</div></div><div class="info-2"><div class="info-item-1">Redis 详解：从入门到精通一、Redis 到底是什么？一句话定义：Redis（Remote Dictionary Server）是一个超高性能的内存数据库，同时支持数据持久化。 通俗比喻：  传统数据库（MySQL） &#x3D; 图书馆（数据在硬盘，找书慢但容量大） Redis &#x3D; 你的办公桌（数据在内存，随手就拿，但桌子大小有限）   二、Redis 的核心特点1. 内存存储 - 极速读写123# 对比测试：Redis vs MySQLMySQL读取: 5-10毫秒  # 需要磁盘I/ORedis读取: 0.1毫秒    # 内存直接访问，快50-100倍！  2. 丰富的数据结构不只是简单的 key-value，还有：  字符串（String） 哈希表（Hash） 列表（List） 集合（Set） 有序集合（Sorted Set） 等等…  3. 持久化可选1内存数据 → 定期保存到磁盘 → 重启后可以恢复  4. 单线程架构12一个线程处理所有请求 → 无锁竞争 → 超高并发性能（实际是多路复用，非多线程）   三、Redis...</div></div></div></a><a class="pagination-related" href="/2026/01/30/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87/" title="分布式游戏服务器架构开发准备"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-30</div><div class="info-item-2">分布式游戏服务器架构开发准备</div></div><div class="info-2"><div class="info-item-1">完整分布式游戏服务器架构开发清单基于我们讨论的所有内容，要开发一套完整的分布式游戏服务器架构，你需要准备以下所有组件： 一、基础设施层（Infrastructure）1. 服务器硬件资源123456789类型                    规格要求                      数量       用途────────────────────────────────────────────────────────────────────────────物理服务器/虚拟机       CPU: 16核+，内存: 64GB+，SSD     3-5台       核心服务游戏网关服务器          CPU: 8核+，内存: 32GB+，高网络     2-4台       玩家连接数据库服务器            CPU: 16核+，内存: 128GB+，NVMe   2-3台       主数据库缓存服务器             CPU: 8核+，内存: 64GB+            3台集群     Redis集群大数据服务器          ...</div></div></div></a><a class="pagination-related" href="/2026/01/30/%E6%B8%B8%E6%88%8F%E5%90%8E%E7%AB%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86/" title="游戏后端微服务拆分"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-30</div><div class="info-item-2">游戏后端微服务拆分</div></div><div class="info-2"><div class="info-item-1">好的，这是一个非常实际且重要的问题。我将结合图示和具体工程实践来详细讲解。 一、宏观架构图示首先，我们通过一张宏观架构图来理解整体布局： flowchart TD     subgraph &quot;客户端层&quot;         C1[游戏客户端]         C2[游戏客户端]         C3[游戏客户端]     end          subgraph &quot;接入层&quot;         G1[网关Gateway&lt;br/&gt;TCP/WebSocket]         G2[网关Gateway&lt;br/&gt;TCP/WebSocket]     end          subgraph &quot;业务服务层&quot;         subgraph &quot;大厅领域&quot;             L[大厅核心服务]             A[活动服务]             M[匹配服务]             F[好友服务]         end                 ...</div></div></div></a><a class="pagination-related" href="/2026/01/30/%E6%B8%B8%E6%88%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8EDocker%E5%8C%96%E5%AE%9E%E8%B7%B5/" title="游戏微服务的部署与Docker化实践"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-30</div><div class="info-item-2">游戏微服务的部署与Docker化实践</div></div><div class="info-2"><div class="info-item-1">游戏微服务的部署与Docker化实践我将详细讲解如何将游戏微服务进行Docker化，并使用编排工具进行部署管理。 一、Docker化基础1. 为什么需要Docker化？对于游戏微服务架构，Docker提供了：  环境一致性：开发、测试、生产环境完全一致 快速部署：秒级启动，分钟级全集群部署 资源隔离：CPU、内存、网络、磁盘隔离 弹性伸缩：根据负载快速扩缩容 版本管理：镜像版本控制，轻松回滚  2. 游戏服务Docker化的挑战12345挑战：1. 网络延迟敏感（特别是战斗服务）2. 长连接管理（网关服务）3. 状态服务（需要持久化数据）4. 高性能要求（需要接近裸机性能）  二、Dockerfile最佳实践1. 多阶段构建示例1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# Dockerfile.activity# 第一阶段：构建阶段FROM golang:1.21-alpine AS builder# 设置编译环境WORKDIR...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">LiuCheng</div><div class="author-info-description">不积跬步无以至千里</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">84</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">48</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Mr-liu-cheng"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://mr-liu-cheng.github.io/img/weixin.jpg" target="_blank" title="WeChat"><i class="fa-brands fa-weixin" style="color: #00ff00;"></i></a><a class="social-icon" href="mailto:liuchengyg@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://mr-liu-cheng.github.io/img/qq.jpg" target="_blank" title="QQ"><i class="fa-brands fa-qq" style="color: #ffffff;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Stay hungry, stay foolish.</div></div><div class="card-widget study-widget" id="study-list"><div class="item-headline"><i class="fas fa-tasks"></i><span>学习目标</span></div><div class="item-content"><div>
  <ul>
    <li>Shader</li>
    <li>华佗热更新</li>
    <li>微信游戏发布</li>
    <li>Steam游戏发布</li>
    <li>广告SDK接入</li>
  </ul>
</div>
</div></div><div class="card-widget calendar-widget" id="calendar-list"><div class="item-headline"><i class="fas fa-tasks"></i><span>今日事今日毕</span></div><div class="item-content"><head>
    <meta charset="UTF-8">
    <title>FullCalendar 农历和调休示例</title>
    <script src='https://cdn.jsdelivr.net/npm/rrule@2.6.4/dist/es5/rrule.min.js'></script>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@latest/main.min.css" rel="stylesheet" />
</head>

<body>
    <a href="/Calendar/">
        <!-- 日历容器 -->
        <div id="calendar_aside"></div>
        <!-- FullCalendar JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@latest/main.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
        <!-- 引入农历库 -->
        <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@latest/lunar.min.js"></script>
        <!-- 本地脚本加载路径需要添加根目录节点-->
        <script src="/js/myCalendar.js"></script>
        <script>
            Show("calendar_aside");
        </script>
    </a>
</body>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E6%98%93%E7%BD%91%E7%BB%9C%E6%B8%B8%E6%88%8F%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">1.</span> <span class="toc-text">简易网络游戏分布式架构图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A0%B8%E5%BF%83%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%88%E6%A6%82%E8%A7%88%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">一、核心架构图（概览）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%AF%A6%E7%BB%86%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%88%E7%BB%84%E4%BB%B6%E4%BA%A4%E4%BA%92%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、详细架构图（组件交互）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E6%B5%81%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">1.3.</span> <span class="toc-text">三、核心数据流架构图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%8C%BA%E5%9F%9F%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">1.4.</span> <span class="toc-text">四、区域部署架构图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6%E8%BF%9E%E6%8E%A5%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-number">1.5.</span> <span class="toc-text">五、关键组件连接关系图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E7%AE%80%E5%8C%96%E7%89%88%E6%9E%B6%E6%9E%84%EF%BC%88%E9%80%82%E5%90%88%E5%B0%8F%E5%9E%8B%E9%A1%B9%E7%9B%AE%EF%BC%89"><span class="toc-number">1.6.</span> <span class="toc-text">六、简化版架构（适合小型项目）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E8%AF%B4%E6%98%8E%E8%A1%A8"><span class="toc-number">1.7.</span> <span class="toc-text">七、核心组件说明表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%E8%B7%AF%E7%BA%BF"><span class="toc-number">1.8.</span> <span class="toc-text">八、架构演进路线</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/02/%E6%B8%B8%E6%88%8F%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91/" title="游戏后台开发">游戏后台开发</a><time datetime="2026-02-02T10:28:46.000Z" title="发表于 2026-02-02 10:28:46">2026-02-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/30/CDN/" title="CDN">CDN</a><time datetime="2026-01-30T10:28:46.000Z" title="发表于 2026-01-30 10:28:46">2026-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/30/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87/" title="分布式游戏服务器架构开发准备">分布式游戏服务器架构开发准备</a><time datetime="2026-01-30T10:28:46.000Z" title="发表于 2026-01-30 10:28:46">2026-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/30/%E6%B8%B8%E6%88%8F%E5%90%8E%E7%AB%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86/" title="游戏后端微服务拆分">游戏后端微服务拆分</a><time datetime="2026-01-30T10:28:46.000Z" title="发表于 2026-01-30 10:28:46">2026-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/30/%E6%B8%B8%E6%88%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8EDocker%E5%8C%96%E5%AE%9E%E8%B7%B5/" title="游戏微服务的部署与Docker化实践">游戏微服务的部署与Docker化实践</a><time datetime="2026-01-30T10:28:46.000Z" title="发表于 2026-01-30 10:28:46">2026-01-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2026 By LiuCheng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="music-button" type="button" title="music"><i class="fas fa-music"> </i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = {"language":"zh-CN","distractionFreeMode":true}

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: 'Ov23lisuIzc4KST5xLzO',
      clientSecret: '55972644d3071dd4c51a2e71064e336d2f51aa66',
      repo: 'mr-liu-cheng.github.io',
      owner: 'Mr-liu-cheng',
      admin: ['Mr-liu-cheng'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || '1028058995747eacb299d8ab1e5fe580'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><div id="music-player" style="display: none;"></div><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script>  fetch("/music/playlist.json")    .then(response => response.json())    .then(data => {      const ap = new APlayer({        container: document.getElementById("music-player"),        fixed: true,        autoplay: false,        audio: data,        lrcType: 3      });    })    .catch(error => console.error("Error loading playlist:", error));</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>