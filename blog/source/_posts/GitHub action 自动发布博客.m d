---
title: GitHub action è‡ªåŠ¨å‘å¸ƒåšå®¢
date: 2025-05-08 14:16:02
updated: 2025-01-08 14:16:02
tags: GitHub Actions
categories: GitHub Actions
keywords: GitHub Actions
description:
---

å®Œæ•´æ¨èå¦‚ä¸‹ï¼š

âœ… æ¨èç‰ˆæœ¬ï¼ˆæ·»åŠ  cleanã€ä¿®æ­£è·¯å¾„ï¼‰

name: Deploy Hexo Blog to GitHub Pages

on:
  push:
    branches:
      - master

jobs:
  build-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Install Hexo CLI
        run: npm install -g hexo-cli

      - name: Install dependencies
        run: npm install
        working-directory: blog

      - name: Clean previous builds
        run: hexo clean
        working-directory: blog

      - name: Generate static files
        run: hexo generate
        working-directory: blog

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./blog/public

ğŸ” hexo deploy æ˜¯å¦è¿˜éœ€è¦ï¼Ÿ

ä¸éœ€è¦ï¼å› ä¸ºï¼š
	â€¢	hexo deploy æ˜¯è°ƒç”¨ hexo-deployer-git æ’ä»¶æŠŠ public æ¨åˆ° GitHubã€‚
	â€¢	ä½ å·²ç»ä½¿ç”¨äº† peaceiris/actions-gh-pagesï¼Œå®ƒæ›´çµæ´»ç¨³å®šï¼Œä¹Ÿæ˜¯ GitHub å®˜æ–¹æ¨èæ–¹å¼ä¹‹ä¸€ã€‚
	â€¢	æ‰€ä»¥ä½ å¯ä»¥ç›´æ¥çœç•¥ hexo deployï¼Œè®© Actions å¸®ä½ éƒ¨ç½²æ›´å¥½ã€‚

æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ é…ç½®ä¸€ä¸ªåŒæ—¶éƒ¨ç½²æ–‡ç« å’Œè¿è¡Œæœ¬åœ°é¢„è§ˆçš„ dev æ„å»ºæ–¹æ¡ˆï¼Ÿæˆ–è€…åŠ ä¸Šè‡ªåŠ¨è¯„è®ºç­‰æ’ä»¶æ”¯æŒï¼Ÿ


ä½ åœ¨ GitHub ä»“åº“é‡Œçœ‹ä¸åˆ° public/ æ–‡ä»¶å¤¹ æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºï¼š

1. public/ æ˜¯ Hexo ç”Ÿæˆçš„æ„å»ºäº§ç‰©ï¼Œåªå­˜åœ¨äº GitHub Actions çš„ä¸´æ—¶ Runner ä¸­

	â€¢	å½“ä½  push åˆ° master åˆ†æ”¯æ—¶ï¼ŒGitHub Actions ä¼šï¼š
	â€¢	å…‹éš†ä½ çš„ä»£ç ï¼ˆå« blog/ ç›®å½•ï¼‰
	â€¢	å®‰è£…ä¾èµ–ã€æ‰§è¡Œ hexo generateï¼Œç”Ÿæˆ public/ é™æ€é¡µé¢
	â€¢	å°† public/ ç›®å½•ä¸Šä¼ åˆ° gh-pages åˆ†æ”¯ï¼ˆç”¨äº GitHub Pages æ‰˜ç®¡ï¼‰

	è¿™äº›æ“ä½œåœ¨ GitHub Actions çš„ä¸´æ—¶ç¯å¢ƒä¸­è¿›è¡Œï¼Œä¸ä¼šæäº¤ public/ åˆ° master åˆ†æ”¯

2. ä¸ºä»€ä¹ˆä¸æŠŠ public/ æäº¤åˆ°æºç é‡Œï¼Ÿ

è¿™æ˜¯æœ€ä½³å®è·µã€‚å› ä¸ºï¼š
	â€¢	public/ æ˜¯æ„å»ºäº§ç‰©ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„
	â€¢	æäº¤æ„å»ºäº§ç‰©åˆ°æºç åˆ†æ”¯ï¼ˆå¦‚ masterï¼‰ä¼šè®© repo å˜å¾—è‡ƒè‚¿ï¼Œå†å²è®°å½•éš¾ç®¡ç†
	â€¢	CI/CD å·¥å…·ï¼ˆå¦‚ GitHub Actionsï¼‰å·²ç»å¯ä»¥è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ

3. ä½ å¯ä»¥åœ¨å“ªé‡Œçœ‹åˆ°ç”Ÿæˆåçš„ public å†…å®¹ï¼Ÿ

åœ¨ GitHub ä»“åº“çš„ gh-pages åˆ†æ”¯ï¼

åœ°å€æ ¼å¼ä¸€èˆ¬æ˜¯ï¼š

https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å/tree/gh-pages

æ¯”å¦‚ï¼š

https://github.com/mr-liu-cheng/mr-liu-cheng.github.io/tree/gh-pages

é‚£é‡Œçš„æ–‡ä»¶å†…å®¹å°±æ˜¯ hexo generate åçš„ public/ æ–‡ä»¶ã€‚

4. å¦‚æœä½ éè¦åœ¨æœ¬åœ°çœ‹åˆ° public/ï¼Ÿ

å¯ä»¥æœ¬åœ°è·‘ï¼š

cd blog
hexo clean
hexo g

ç„¶åå°±èƒ½åœ¨ blog/public/ ä¸­çœ‹åˆ°ç”Ÿæˆçš„ HTML é™æ€é¡µé¢ã€‚

æ€»ç»“ï¼š

é—®é¢˜	åŸå› 
GitHub ä»“åº“é‡Œæ²¡æœ‰ public/	å®ƒæ˜¯æ„å»ºäº§ç‰©ï¼Œåªç”Ÿæˆåœ¨ GitHub Actions çš„ä¸´æ—¶ç¯å¢ƒä¸­
æ„å»ºåçš„é¡µé¢åœ¨å“ªï¼Ÿ	åœ¨ gh-pages åˆ†æ”¯ä¸Šï¼ŒGitHub Pages ç”¨æ¥å±•ç¤º
æœ¬åœ°è¦çœ‹ public/ï¼Ÿ	è‡ªå·±æœ¬åœ°è¿è¡Œ hexo generate å³å¯

éœ€è¦æˆ‘å¸®ä½ é…ç½®è‡ªåŠ¨é¢„è§ˆæˆ–è®¿é—®åœ°å€éªŒè¯ä¸€ä¸‹éƒ¨ç½²æˆåŠŸäº†å—ï¼Ÿ




è¦†ç›–åˆ†æ”¯æäº¤


ä½ è¯´çš„â€œåŸæ¥çš„æ–‡ä»¶è¢«æ¸…ç©ºäº†â€ï¼Œæ˜¯æŒ‡ GitHub ä»“åº“ä¸­çš„æ–‡ä»¶ï¼Œè¢« GitHub Actions çš„éƒ¨ç½²æµç¨‹æ›¿æ¢/æ¸…ç©ºäº†ï¼Œè¿™ç¡®å®æ˜¯æœ‰å¯èƒ½çš„ã€‚

æˆ‘ä»¬æ¥è¯¦ç»†åˆ†æä¸‹åŸå› ï¼š

1. ä½ ä½¿ç”¨çš„æ˜¯ peaceiris/actions-gh-pages

å®ƒçš„è¡Œä¸ºæ˜¯ï¼š
éƒ¨ç½²æ—¶ä¼šæŠŠ gh-pages åˆ†æ”¯å†…å®¹å…¨éƒ¨æ¸…ç©ºï¼Œç„¶åç”¨ä½ æŒ‡å®šçš„ publish_dir ä¸­çš„å†…å®¹è¦†ç›–å¹¶æäº¤ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸æ˜¯â€œè¿½åŠ â€ï¼Œæ˜¯æ›¿æ¢æ•´ä¸ª gh-pages åˆ†æ”¯ï¼Œç”¨äº GitHub Pages å±•ç¤ºé™æ€ç½‘ç«™ã€‚





é…ç½®éƒ¨ç½²æª¢æŸ¥ï¼š

æœ€åç¡®è®¤å‡ ç‚¹ï¼š

	â€¢	ä½ çš„ Hexo é…ç½®æ–‡ä»¶ _config.ymlã€source/ ç­‰ç¡®å®éƒ½åœ¨ blog/ ä¸­
	â€¢	deploy.yml è„šæœ¬ä¸­æ‰€æœ‰ Hexo å‘½ä»¤çš„ working-directory éƒ½æ˜¯ blog
	â€¢	publish_dir æ˜¯ ./blog/public

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥è®¿é—® GitHub Pages è®¾ç½®é¡µé¢ç¡®è®¤æ˜¯å¦å¯ç”¨äº† GitHub Pagesï¼Œå¹¶ä¸”æŒ‡å‘äº† gh-pages åˆ†æ”¯ã€‚
